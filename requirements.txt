# ====================================
# PDF-PayPal-Stripe システム 依存関係
# ====================================

# =============================
# 🅱️ コアWebフレームワーク
# =============================
Flask>=2.2.5
Werkzeug>=2.2.3
Flask-WTF>=1.1.1
Flask-Session>=0.5.0
Flask-Login>=0.6.2
WTForms>=3.0.1
Jinja2>=3.1.2

# =============================
# 💳 決済システム
# =============================
# Stripe決済API
stripe==7.0.0

# PayPal決済API
paypalrestsdk==1.13.1

# =============================
# 📄 PDF・文書処理
# =============================
# HTML to PDF conversion - 重要なので最初に配置
xhtml2pdf==0.2.11

# PDF解析・処理
pdfplumber==0.9.0
PyPDF2==3.0.1
pdfminer.six==20221105
pdf2image==1.16.3

# =============================
# 🔍 OCR・画像認識
# =============================
# Tesseract OCR
pytesseract==0.3.10

# 画像処理
Pillow==10.0.1

# NumPyを1.xシリーズに固定（OpenCVとの互換性のため）
numpy==1.26.4
opencv-python==4.8.0.74

# Google Cloud Vision API
google-cloud-vision==3.4.0

# =============================
# 🌐 HTTP・API通信
# =============================
requests>=2.31.0
urllib3<1.27,>=1.25.4

# =============================
# 🔐 セキュリティ・暗号化
# =============================
cryptography==41.0.7
bcrypt==4.1.2
PyJWT==2.8.0

# =============================
# 🗃️ データベース
# =============================
# SQLite (標準)
# PostgreSQL サポート (オプション)
psycopg2-binary==2.9.8

# データベースORM
SQLAlchemy>=2.0.23
Flask-SQLAlchemy>=3.0.5

# =============================
# ☁️ クラウドサービス
# =============================
# Google Cloud Platform
google-cloud-firestore==2.11.1
google-cloud-storage==2.10.0

# AWS支援
boto3==1.28.38

# =============================
# 🚀 デプロイ・運用
# =============================
# WSGIサーバー
gunicorn==20.1.0

# 環境変数管理
python-dotenv==1.0.0

# =============================
# 📊 監視・ログ
# =============================
# ログ出力・ローテーション
# Python標準ライブラリのloggingを使用するため、外部パッケージは不要
loguru==0.7.2

# メトリクス・監視
prometheus-client==0.19.0
Flask-Prometheus==0.0.1

# =============================
# 🧪 テスト・品質管理
# =============================
# テストフレームワーク (開発環境)
pytest==7.4.3
pytest-flask==1.3.0
pytest-mock==3.12.0
coverage==7.3.2

# コード品質
flake8==6.1.0
black==23.11.0

# =============================
# 🔧 ユーティリティ
# =============================
# 日時処理
python-dateutil==2.8.2

# 並行処理
celery==5.3.4

# JSON・データ処理
jsonschema==4.20.0

# コマンドライン引数
click==8.1.7

# =============================
# 📈 パフォーマンス
# =============================
# キャッシュ
redis==5.0.1
Flask-Caching==2.1.0

# =============================
# 🌍 国際化
# =============================
# 多言語対応
Flask-Babel==4.0.0

# =============================
# 📧 通知・メール
# =============================
# メール送信
Flask-Mail==0.9.1

# =============================
# 注記・説明
# =============================

# 🔧 バージョン固定の理由:
# - Flask 2.2.3: セキュリティ安定版
# - Stripe 7.0.0: 最新安定版、Webhooks対応
# - numpy 1.26.4: OpenCVとの互換性確保
# - cryptography 41.0.7: APIキー暗号化用

# 🚨 本番環境での注意:
# - テスト用ライブラリ(pytest系)は本番では不要
# - デバッグ用ライブラリは本番では無効化
# - バージョン更新前は必ずテスト実行

# 🔄 更新手順:
# 1. pip install -r requirements.txt
# 2. pip freeze > requirements.lock  # 厳密なバージョン記録
# 3. アプリケーションテスト実行
# 4. 本番環境にデプロイ

# 📞 トラブルシューティング:
# - OpenCVエラー: numpy==1.26.4 を維持
# - Stripeエラー: stripe==7.0.0 を維持
# - PDF処理エラー: xhtml2pdf, pdfplumber の併用確認
