# Stripeæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Stripeæ±ºæ¸ˆæ©Ÿèƒ½è¿½åŠ å¾Œã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨æ¤œè¨¼æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ—ï¸ ãƒ†ã‚¹ãƒˆæ§‹æˆ

### è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ

```
tests/
â”œâ”€â”€ __init__.py                     # ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆæœŸåŒ–
â”œâ”€â”€ test_stripe_integration.py     # Stripeçµ±åˆãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ test_performance.py            # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ test_security.py               # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ test_integration.py            # ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ
â””â”€â”€ test_runner.py                 # ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼
```

### æ‰‹å‹•ãƒ†ã‚¹ãƒˆ

- `MANUAL_TEST_PROCEDURES.md` - è©³ç´°ãªæ‰‹å‹•ãƒ†ã‚¹ãƒˆæ‰‹é †æ›¸

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ãƒ†ã‚¹ãƒˆç’°å¢ƒæº–å‚™

```bash
# ãƒ†ã‚¹ãƒˆç”¨ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements-test.txt

# ç’°å¢ƒå¤‰æ•°è¨­å®š
export STRIPE_SECRET_KEY_TEST=sk_test_your_key
export STRIPE_PUBLISHABLE_KEY_TEST=pk_test_your_key
export STRIPE_MODE=test
```

### 2. ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# åŸºæœ¬æ©Ÿèƒ½ã®å‹•ä½œç¢ºèªï¼ˆ1åˆ†ä»¥å†…ï¼‰
python tests/test_runner.py --mode smoke
```

### 3. ãƒ•ãƒ«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãï¼‰
python tests/test_runner.py --mode full

# é«˜é€Ÿãƒ†ã‚¹ãƒˆï¼ˆé‡ã„ãƒ†ã‚¹ãƒˆã‚’é™¤å¤–ï¼‰
python tests/test_runner.py --mode quick --no-coverage
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è©³ç´°

### 1. Stripe APIæ¥ç¶šãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: `test_stripe_integration.py::TestStripeAPIConnection`

```bash
# å€‹åˆ¥å®Ÿè¡Œ
pytest tests/test_stripe_integration.py::TestStripeAPIConnection -v
```

**ãƒ†ã‚¹ãƒˆå†…å®¹**:
- âœ… æ­£å¸¸ãªStripeæ¥ç¶š
- âœ… ç„¡åŠ¹ãªAPIã‚­ãƒ¼ã®å‡¦ç†
- âœ… Stripeè¨­å®šã®æ¤œè¨¼
- âœ… APIã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 2. æ±ºæ¸ˆãƒªãƒ³ã‚¯ç”Ÿæˆãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: `test_stripe_integration.py::TestStripePaymentLinkGeneration`

```bash
# æ±ºæ¸ˆãƒªãƒ³ã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_stripe_integration.py::TestStripePaymentLinkGeneration -v
```

**ãƒ†ã‚¹ãƒˆå†…å®¹**:
- âœ… åŸºæœ¬çš„ãªæ±ºæ¸ˆãƒªãƒ³ã‚¯ä½œæˆ
- âœ… é€šè²¨å¤‰æ›å‡¦ç†ï¼ˆJPY, USD, EURï¼‰
- âœ… ç„¡åŠ¹é‡‘é¡ã®å‡¦ç†
- âœ… é•·ã„é¡§å®¢åã®å‡¦ç†

### 3. OCRçµ±åˆãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: `test_stripe_integration.py::TestOCRIntegration`

```bash
# OCRçµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_stripe_integration.py::TestOCRIntegration -v
```

**ãƒ†ã‚¹ãƒˆå†…å®¹**:
- âœ… OCRãƒ‡ãƒ¼ã‚¿æŠ½å‡ºãƒ»æ¤œè¨¼
- âœ… OCRã‹ã‚‰Stripeæ±ºæ¸ˆãƒªãƒ³ã‚¯ä½œæˆ
- âœ… æ—¥æœ¬èªãƒ‡ãƒ¼ã‚¿å‡¦ç†
- âœ… ç„¡åŠ¹ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†

### 4. ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: `test_stripe_integration.py::TestProviderSwitching`

```bash
# ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒ†ã‚¹ãƒˆ
pytest tests/test_stripe_integration.py::TestProviderSwitching -v
```

**ãƒ†ã‚¹ãƒˆå†…å®¹**:
- âœ… PayPal â‡” Stripeåˆ‡ã‚Šæ›¿ãˆ
- âœ… ç„¡åŠ¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®å‡¦ç†
- âœ… è¨­å®šã«ã‚ˆã‚‹å‹•ä½œå¤‰æ›´

### 5. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: `test_stripe_integration.py::TestErrorHandling`

```bash
# ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
pytest tests/test_stripe_integration.py::TestErrorHandling -v
```

**ãƒ†ã‚¹ãƒˆå†…å®¹**:
- âœ… Stripe APIã‚¨ãƒ©ãƒ¼
- âœ… ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
- âœ… ãƒ¬ãƒ¼ãƒˆåˆ¶é™å‡¦ç†

### 6. æ—¥æœ¬èªå¯¾å¿œãƒ†ã‚¹ãƒˆ

**å¯¾è±¡**: `test_stripe_integration.py::TestJapaneseLanguageSupport`

```bash
# æ—¥æœ¬èªå¯¾å¿œãƒ†ã‚¹ãƒˆ
pytest tests/test_stripe_integration.py::TestJapaneseLanguageSupport -v
```

**ãƒ†ã‚¹ãƒˆå†…å®¹**:
- âœ… æ—¥æœ¬èªæ–‡å­—å‡¦ç†
- âœ… ç‰¹æ®Šæ–‡å­—å‡¦ç†ï¼ˆãˆ±ã€å…¨è§’æ•°å­—ï¼‰
- âœ… ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç¢ºèª

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

### å®Ÿè¡Œæ–¹æ³•

```bash
# è»½é‡ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
pytest tests/test_performance.py -m "not slow" -v

# å…¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆæ™‚é–“è¦ï¼‰
pytest tests/test_performance.py --include-slow -v
```

### æ¸¬å®šé …ç›®

| é …ç›® | åŸºæº–å€¤ | æ¸¬å®šå†…å®¹ |
|------|--------|----------|
| å˜ä¸€æ±ºæ¸ˆãƒªãƒ³ã‚¯ä½œæˆ | <1ç§’ | åŸºæœ¬å‡¦ç†æ™‚é–“ |
| é€£ç¶š10ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | å¹³å‡<500ms | å‡¦ç†å®‰å®šæ€§ |
| ä¸¦è¡Œ5ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | åŠ¹ç‡>0.5 | ä¸¦è¡Œå‡¦ç†åŠ¹æœ |
| å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç† | <3ç§’ | ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | å¢—åŠ <50MB | ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ç¢ºèª |

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŸºæº–

```python
# åŸºæº–å€¤å®šç¾©ï¼ˆtest_performance.pyå†…ï¼‰
PERFORMANCE_BENCHMARKS = {
    'single_request_max_time': 1.0,     # ç§’
    'average_request_max_time': 0.5,    # ç§’
    'concurrent_efficiency_min': 0.5,   # åŠ¹ç‡
    'large_data_max_time': 3.0,         # ç§’
    'memory_increase_max': 50.0         # MB
}
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

### å®Ÿè¡Œæ–¹æ³•

```bash
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_security.py -v
```

### ãƒ†ã‚¹ãƒˆé …ç›®

#### APIã‚­ãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- âœ… APIã‚­ãƒ¼æš—å·åŒ–ãƒ»å¾©å·åŒ–
- âœ… ãƒ­ã‚°ã¸ã®APIã‚­ãƒ¼æ¼æ´©é˜²æ­¢
- âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… æš—å·åŒ–ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«æ¨©é™

#### è¨­å®šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- âœ… ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ™‚ã®æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿é™¤å¤–
- âœ… ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³æ”»æ’ƒé˜²æ­¢
- âœ… å®‰å…¨ãªè¨­å®šã‚¤ãƒ³ãƒãƒ¼ãƒˆ

#### å…¥åŠ›æ¤œè¨¼
- âœ… é‡‘é¡å…¥åŠ›æ¤œè¨¼
- âœ… é¡§å®¢åã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¤œè¨¼

#### Webhookã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- âœ… ç½²åæ¤œè¨¼
- âœ… ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰æ¤œè¨¼
- âœ… ä¸æ­£å½¢å¼ãƒ‡ãƒ¼ã‚¿å‡¦ç†

## ğŸ”§ çµ±åˆãƒ†ã‚¹ãƒˆ

### å®Ÿè¡Œæ–¹æ³•

```bash
# çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_integration.py -v
```

### ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒª

#### ãƒ•ãƒ«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- âœ… PDFâ†’OCRâ†’Stripeæ±ºæ¸ˆã®å®Œå…¨ãƒ•ãƒ­ãƒ¼
- âœ… ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒãƒ¼
- âœ… è¨­å®šæ°¸ç¶šåŒ–
- âœ… ã‚¨ãƒ©ãƒ¼å›å¾©

#### ä¸¦è¡Œå‹•ä½œ
- âœ… ä¸¦è¡Œæ±ºæ¸ˆãƒªãƒ³ã‚¯ä½œæˆ
- âœ… ä¸¦è¡Œè¨­å®šã‚¢ã‚¯ã‚»ã‚¹

#### ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
- âœ… æ±ºæ¸ˆå±¥æ­´çµ±åˆ
- âœ… è¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒ

#### ã‚·ã‚¹ãƒ†ãƒ å¾©æ—§åŠ›
- âœ… éƒ¨åˆ†çš„ã‚µãƒ¼ãƒ“ã‚¹éšœå®³
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šå¤±æ•—
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å•é¡Œ

## ğŸ“Š ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ

### è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

```bash
# HTMLãƒ¬ãƒãƒ¼ãƒˆä»˜ãã§å®Ÿè¡Œ
python tests/test_runner.py --mode full

# ç”Ÿæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:
# test_reports/test_report_YYYYMMDD_HHMMSS.html
# test_reports/test_report_YYYYMMDD_HHMMSS.json
```

### ãƒ¬ãƒãƒ¼ãƒˆå†…å®¹

- **ã‚µãƒãƒªãƒ¼**: æˆåŠŸç‡ã€å®Ÿè¡Œæ™‚é–“ã€çµ±è¨ˆ
- **ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆè©³ç´°**: å„ã‚«ãƒ†ã‚´ãƒªã®çµæœ
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ**: ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸
- **æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: å•é¡ŒãŒã‚ã‚‹å ´åˆã®å¯¾å¿œç­–

### ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒãƒ¼ãƒˆ

```
ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚æˆåŠŸ â”‚å¤±æ•— â”‚ã‚¹ã‚­ãƒƒãƒ— â”‚ æˆåŠŸç‡   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çµ±åˆãƒ†ã‚¹ãƒˆ  â”‚ 25  â”‚  0  â”‚   1     â”‚ 100.0%   â”‚
â”‚ æ€§èƒ½ãƒ†ã‚¹ãƒˆ  â”‚ 15  â”‚  1  â”‚   2     â”‚  93.8%   â”‚
â”‚ å®‰å…¨ãƒ†ã‚¹ãƒˆ  â”‚ 20  â”‚  0  â”‚   0     â”‚ 100.0%   â”‚
â”‚ ç·åˆãƒ†ã‚¹ãƒˆ  â”‚ 12  â”‚  0  â”‚   1     â”‚ 100.0%   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ‰‹å‹•ãƒ†ã‚¹ãƒˆ

### åŸºæœ¬æ“ä½œãƒ†ã‚¹ãƒˆ

1. **è¨­å®šç”»é¢ãƒ†ã‚¹ãƒˆ**
   ```
   1. /settings ã«ã‚¢ã‚¯ã‚»ã‚¹
   2. Stripeè¨­å®šã‚’å…¥åŠ›
   3. æ¥ç¶šãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   4. åŒ…æ‹¬ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   ```

2. **PDFå‡¦ç†ãƒ†ã‚¹ãƒˆ**
   ```
   1. ãƒ¡ã‚¤ãƒ³ç”»é¢ã§PDFã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   2. OCRå‡¦ç†ç¢ºèª
   3. Stripeé¸æŠ
   4. æ±ºæ¸ˆãƒªãƒ³ã‚¯ä½œæˆ
   ```

### å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ

| é …ç›® | æœ€å°å€¤ | æœ€å¤§å€¤ | æœŸå¾…çµæœ |
|------|--------|--------|----------|
| é‡‘é¡ | Â¥1 | Â¥99,999,999 | æ­£å¸¸å‡¦ç† |
| é¡§å®¢å | 1æ–‡å­— | 500æ–‡å­— | æ­£å¸¸å‡¦ç† |
| èª¬æ˜ | ç©º | 1000æ–‡å­— | æ­£å¸¸å‡¦ç† |

### ã‚¨ãƒ©ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ

```bash
# ç„¡åŠ¹APIã‚­ãƒ¼ãƒ†ã‚¹ãƒˆ
export STRIPE_SECRET_KEY_TEST=sk_test_invalid
# â†’ "èªè¨¼ã‚¨ãƒ©ãƒ¼"ãŒè¡¨ç¤ºã•ã‚Œã‚‹

# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡æ–­çŠ¶æ…‹ã§æ±ºæ¸ˆãƒªãƒ³ã‚¯ä½œæˆ
# â†’ "æ¥ç¶šã‚¨ãƒ©ãƒ¼"ãŒè¡¨ç¤ºã•ã‚Œã‚‹

# ä¸æ­£å…¥åŠ›ãƒ†ã‚¹ãƒˆ
# é‡‘é¡: -1000, é¡§å®¢å: <script>alert(1)</script>
# â†’ é©åˆ‡ã«ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã•ã‚Œã‚‹
```

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ãƒ†ã‚¹ãƒˆå¤±æ•—: "Stripe library not found"

**åŸå› **: Stripeãƒ©ã‚¤ãƒ–ãƒ©ãƒªæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**è§£æ±ºæ–¹æ³•**:
```bash
pip install stripe==7.0.0
```

#### 2. ãƒ†ã‚¹ãƒˆå¤±æ•—: "Invalid API key"

**åŸå› **: ç’°å¢ƒå¤‰æ•°ã®è¨­å®šä¸å‚™

**è§£æ±ºæ–¹æ³•**:
```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
cat .env | grep STRIPE

# æ­£ã—ã„å½¢å¼ã‹ç¢ºèª
# STRIPE_SECRET_KEY_TEST=sk_test_xxxx
# STRIPE_PUBLISHABLE_KEY_TEST=pk_test_xxxx
```

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå¤±æ•—

**åŸå› **: ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³

**è§£æ±ºæ–¹æ³•**:
```bash
# è»½é‡ãƒ†ã‚¹ãƒˆã§å®Ÿè¡Œ
pytest tests/test_performance.py -m "not slow"

# ä¸¦è¡Œæ•°ã‚’èª¿æ•´
# test_performance.pyå†…ã®concurrent_countã‚’æ¸›ã‚‰ã™
```

#### 4. æ—¥æœ¬èªæ–‡å­—åŒ–ã‘

**åŸå› **: ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¨­å®š

**è§£æ±ºæ–¹æ³•**:
```bash
# ç’°å¢ƒå¤‰æ•°è¨­å®š
export LANG=ja_JP.UTF-8
export LC_ALL=ja_JP.UTF-8

# Pythonã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç¢ºèª
python -c "import sys; print(sys.getdefaultencoding())"
```

### ãƒ­ã‚°ç¢ºèªæ–¹æ³•

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
tail -f logs/app.log

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ­ã‚°
pytest tests/ -v --capture=no

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰å®Ÿè¡Œ
export DEBUG=True
python tests/test_runner.py --mode smoke
```

### ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ

```bash
# è©³ç´°å‡ºåŠ›ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_stripe_integration.py -v -s --tb=long

# ç‰¹å®šãƒ†ã‚¹ãƒˆã®ã¿ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ
pytest tests/test_stripe_integration.py::TestStripeAPIConnection::test_valid_stripe_connection -v -s --pdb
```

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒªãƒªãƒ¼ã‚¹å‰ãƒã‚§ãƒƒã‚¯

- [ ] å…¨è‡ªå‹•ãƒ†ã‚¹ãƒˆãŒæˆåŠŸï¼ˆæˆåŠŸç‡95%ä»¥ä¸Šï¼‰
- [ ] æ‰‹å‹•ãƒ†ã‚¹ãƒˆã®åŸºæœ¬ã‚·ãƒŠãƒªã‚ªãŒå…¨ã¦æˆåŠŸ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆãŒåŸºæº–å€¤ã‚’ã‚¯ãƒªã‚¢
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆãŒå…¨ã¦æˆåŠŸ
- [ ] æœ¬ç•ªç’°å¢ƒã§ã®ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆãŒæˆåŠŸ
- [ ] ãƒ­ã‚°ã«æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ãªã„
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé©åˆ‡ã«ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã•ã‚Œã¦ã„ã‚‹

### é‹ç”¨é–‹å§‹å¾Œãƒã‚§ãƒƒã‚¯

- [ ] æ±ºæ¸ˆæˆåŠŸç‡ã®ç›£è¦–
- [ ] å¿œç­”æ™‚é–“ã®ç›£è¦–
- [ ] ã‚¨ãƒ©ãƒ¼ç‡ã®ç›£è¦–
- [ ] Webhookã®å‹•ä½œç¢ºèª
- [ ] ãƒ­ã‚°å‡ºåŠ›ã®ç¢ºèª

## ğŸš€ ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### GitHub Actionsè¨­å®šä¾‹

```yaml
# .github/workflows/stripe-tests.yml
name: Stripe Integration Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
        pip install -r requirements-test.txt
    - name: Run tests
      env:
        STRIPE_SECRET_KEY_TEST: ${{ secrets.STRIPE_SECRET_KEY_TEST }}
        STRIPE_PUBLISHABLE_KEY_TEST: ${{ secrets.STRIPE_PUBLISHABLE_KEY_TEST }}
      run: |
        python tests/test_runner.py --mode quick --no-coverage
```

### ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ç¶™ç¶šå®Ÿè¡Œ

```bash
# ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pip install pytest-watch
ptw tests/ -- --tb=short
```

## ğŸ“ˆ ãƒ†ã‚¹ãƒˆå“è³ªå‘ä¸Š

### ã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š

```bash
# ç¾åœ¨ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
pytest tests/ --cov=. --cov-report=html
# htmlcov/index.html ã§è©³ç´°ç¢ºèª

# æœªã‚«ãƒãƒ¼è¡Œã®ç¢ºèª
pytest tests/ --cov=. --cov-report=term-missing
```

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã¯ä»¥ä¸‹ã®è¦³ç‚¹ã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ :

1. **æ­£å¸¸ç³»**: åŸºæœ¬çš„ãªå‹•ä½œç¢ºèª
2. **ç•°å¸¸ç³»**: ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ç¢ºèª
3. **å¢ƒç•Œå€¤**: æœ€å°/æœ€å¤§å€¤ã§ã®å‹•ä½œç¢ºèª
4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æ”»æ’ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã¸ã®å¯¾å¿œç¢ºèª
5. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: æ€§èƒ½è¦ä»¶ã®ç¢ºèª

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

ãƒ†ã‚¹ãƒˆã«é–¢ã™ã‚‹è³ªå•ã‚„å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:

1. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¢ºèª**: æœ¬ã‚¬ã‚¤ãƒ‰ã¨ã‚³ãƒ¡ãƒ³ãƒˆ
2. **ãƒ­ã‚°ç¢ºèª**: ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®è©³ç´°åˆ†æ
3. **ç’°å¢ƒç¢ºèª**: ä¾å­˜é–¢ä¿‚ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³
4. **å†ç¾æ‰‹é †**: æœ€å°é™ã®å†ç¾æ‰‹é †ã‚’ä½œæˆ

---

*ã“ã®ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ã¯Stripeæ©Ÿèƒ½ã®å“è³ªä¿è¨¼ã¨å®‰å®šé‹ç”¨ã‚’ç›®çš„ã¨ã—ã¦ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚å®šæœŸçš„ãªæ›´æ–°ã¨æ”¹å–„ã‚’æ¨å¥¨ã—ã¾ã™ã€‚*